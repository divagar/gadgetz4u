<div class="products row">

    <div *ngIf="fbCategories != null" class="row">
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 mmBar">
            <!-- category btn -->
            <!--<span>Category &nbsp; &nbsp;</span>-->
            <div class="btn-group">
                <button type="button" class="btn" *ngIf="!selectedCategory">Category : All</button>
                <button type="button" class="btn" *ngIf="selectedCategory">Category : {{selectedCategory}}</button>
                <button type="button" class="btn dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <span class="caret"></span>
                    <span class="sr-only">Toggle Dropdown</span>
                </button>
                <ul class="dropdown-menu" *ngIf="fbCategories">
                    <li><a (click)="selectDefault()" *ngIf="selectedCategory">All</a></li>
                    <li role="separator" class="divider" *ngIf="selectedCategory"></li>
                    <li *ngFor="let categories of fbCategories | async; let index = index" [class.active]="isCategoryActive(categories.Name)">
                        <a class="mmLink" [routerLink]="['/products', { c: categories.Name, cId: index }]">
                            {{categories.Name}}
                        </a>
                    </li>
                </ul>
            </div>
            <!-- Brand btn -->
            <!--<span *ngIf="selectedCategory">&nbsp; &nbsp; Brand &nbsp; &nbsp;</span>-->
            <div class="btn-group" *ngIf="selectedCategory">
                <button type="button" class="btn" *ngIf="!selectedBrand">Brand : All</button>
                <button type="button" class="btn" *ngIf="selectedBrand">Brand : {{selectedBrand}}</button>
                <button type="button" class="btn dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <span class="caret"></span>
                    <span class="sr-only">Toggle Dropdown</span>
                </button>
                <ul class="dropdown-menu" *ngIf="fbCategoriesBrands">
                    <li *ngFor="let brand of fbCategoriesBrands | async; let index = index" [class.active]="isBrandActive(brand.Name)">
                        <a class="mmLink" [routerLink]="['/products', { c: selectedCategory, cId: selectedCategoryId, b: brand.Name }]">
                            {{brand.Name}}
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <div *ngIf="fbCategories != null" class="row">
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 pDetailsPane">
            <router-outlet>

                <!-- alert start -->
                <div class="row row-centered" *ngIf="productAlert">
                    <div class="col-md-12">
                        <div class="alert alert-{{productAlertType}} alert-dismissible" role="alert">
                            <button type="button" class="close" (click)="closeAlert()"><span aria-hidden="true">&times;</span></button>                            {{productAlertMsg}}
                        </div>
                    </div>
                </div>
                <!-- alert ends -->

                <!-- product tile dynamic content start -->
                <div class="productTile row row-centered" *ngIf="!selectedProductId">
                    <div class='col-xs-12 col-sm-4 col-md-3 col-lg-2 col-centered' *ngFor="let product of fbProducts | async">
                        <a class='nostyle' [routerLink]="['/products', 
                                                            { c: product.Categories, 
                                                              cId: product.CategoriesId, 
                                                              b: product.Brands, 
                                                              pId: product.$key,
                                                              p: encodeURIComponent(product.Name)}]">
                            <div class='pHeader'>
                                <h3>{{product.Name}}</h3>
                                <h6>{{product.Description}}</h6>
                                <hr/>
                            </div>
                            <div class='pContent'>
                                <img src='{{product.ImageLink}}'>
                            </div>
                            <div class="pFooter">
                                <hr/>
                                <div class='mrp'>{{product.MRP}}</div>
                                <div class='price'>{{product.Price}}</div>
                            </div>
                        </a>
                    </div>
                    <div style="clear: both;"></div>
                </div>
                <!-- product tile dynamic content ends -->

                <!-- product details dynamic content start -->
                <div class="productDetails row row-centered" *ngIf="fbProductDetails">
                    <div class="col-md-4 pImage">
                        <img src="{{ (fbProductDetails | async)?.ImageLink }}" class="image-responsive" />
                    </div>
                    <div class="col-md-8 pDetails">
                        <div class="row">
                            <div class="col-md-12 pName">
                                <h2>{{ (fbProductDetails | async)?.Name }}</h2>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12 pDescription">
                                <span class="monospaced">{{ (fbProductDetails | async)?.Description }}</span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12 pPrice">
                                <div>
                                    <span class="mrp">{{ (fbProductDetails | async)?.MRP }}</span>
                                    <span class="per label label-success">{{ calcPer((fbProductDetails | async)?.Price, (fbProductDetails | async)?.MRP) }}</span>
                                </div>
                                <div>
                                    <span class="price">{{ (fbProductDetails | async)?.Price }}</span>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12 pShare">
                                <!-- fb share -->
                                <div class="fb-share-button" data-layout="button" data-mobile-iframe="true">
                                    <a class="fb-xfbml-parse-ignore" target="_blank">Share</a>
                                </div>
                                <!-- twitter share -->

                                <a href="https://twitter.com/share" class="twitter-share-button" data-text="Check out this deal." data-via="gadgetz4u.in">Tweet</a>

                            </div>
                        </div>
                    </div>

                    <div class="col-md-12 pDetails">
                        <div class="row">
                            <div class="col-md-12">
                                <p class="pTitle">Product Details</p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <span [innerHtml]="sanitizer.bypassSecurityTrustHtml((fbProductDetails | async)?.Details)"></span>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- product details dynamic content ends -->
            </router-outlet>
        </div>
    </div>
</div>