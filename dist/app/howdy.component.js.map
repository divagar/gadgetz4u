{"version":3,"file":"howdy.component.js","sourceRoot":"","sources":["howdy.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { Component, OnInit, AfterViewInit } from '@angular/core';\r\nimport { AngularFire, FirebaseListObservable, FirebaseObjectObservable } from 'angularfire2';\r\nimport { Routes, Router, RouteSegment, ROUTER_DIRECTIVES, ROUTER_PROVIDERS } from '@angular/router';\r\nimport { LoginComponent } from './login.component';\r\nimport { Observable } from 'rxjs/RX';\r\n\r\ndeclare var jQuery: any;\r\ndeclare var tinymce: any;\r\n\r\n@Component({\r\n    moduleId: module.id,\r\n    selector: 'howdy',\r\n    templateUrl: 'howdy.component.html',\r\n    styleUrls: ['howdy.component.css'],\r\n    providers: [LoginComponent]\r\n})\r\n\r\nexport class HowdyComponent implements OnInit, AfterViewInit {\r\n    fbCategories: FirebaseObjectObservable<any>;\r\n    fbCategoriesBrands: FirebaseObjectObservable<any>;\r\n    fbProducts: Observable<any[]>;\r\n    fbProductDetails: FirebaseObjectObservable<any>;\r\n    fbNewProduct: FirebaseListObservable<any>;\r\n\r\n    selectedCategory: string;\r\n    selectedBrand: string;\r\n    selectedBrandId: number;\r\n    selectedProduct: string;\r\n    selectedProductId: number;\r\n    addNewProduct: boolean;\r\n\r\n    timerTiny: any;\r\n\r\n    howdyAlert: boolean;\r\n    howdyAlertMsg: string;\r\n    howdyAlertType: string;\r\n\r\n    constructor(public af: AngularFire,\r\n                public loginUser: LoginComponent,\r\n                public router: Router) {\r\n        //check user credentials\r\n        if(this.loginUser.user == null)\r\n            this.router.navigate(['/login']);\r\n\r\n        this.fbCategories = af.database.object('/Gadgetz/Categories');\r\n    }\r\n\r\n    ngOnInit() {\r\n\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        /*jQuery(\"#ddCategory\").on('click', 'li a', function () {\r\n            jQuery(\"#btnCategory.btn:first-child\").text(jQuery(this).text());\r\n            jQuery(\"#btnCategory.btn:first-child\").val(jQuery(this).text());\r\n        });\r\n\r\n        jQuery(\"#ddBrand\").on('click', 'li a', function () {\r\n            jQuery(\"#btnBrand.btn:first-child\").text(jQuery(this).text());\r\n            jQuery(\"#btnBrand.btn:first-child\").val(jQuery(this).text());\r\n        });*/\r\n    }\r\n\r\n    howdyLogout() {\r\n        this.loginUser.logoutUser();\r\n    }\r\n    selectCategory(name: string) {\r\n        this.selectedCategory = name;\r\n        this.selectedBrand = null;\r\n        this.selectedBrandId = null;\r\n        this.selectedProduct = null;\r\n        this.selectedProductId = null;\r\n        this.addNewProduct = false;\r\n\r\n        var query: string = \"/Gadgetz/\" + this.selectedCategory + '/Brands';\r\n        console.log(query);\r\n        this.fbCategoriesBrands = this.af.database.object(query);\r\n    }\r\n\r\n    selectBrand(index: number, name: string) {\r\n        this.selectedBrand = name;\r\n        this.selectedBrandId = index;\r\n        this.selectedProduct = null;\r\n        this.selectedProductId = null;\r\n        this.addNewProduct = false;\r\n\r\n        var query: string = \"/Gadgetz/\" + this.selectedCategory + '/Brands/' + index + '/Products';\r\n        console.log(query);\r\n        this.fbProducts = this.af.database.list(query).map((_products) => {\r\n            return _products.map((_product) => {\r\n                return _product;\r\n            })\r\n        })\r\n    }\r\n\r\n    selectProduct(index: number, name: string) {\r\n        this.selectedProduct = name;\r\n        this.selectedProductId = index;\r\n        this.addNewProduct = false;\r\n\r\n        var query: string = \"/Gadgetz/\" + this.selectedCategory + '/Brands/' + this.selectedBrandId + '/Products/' + index;\r\n        console.log(query);\r\n        this.fbProductDetails = this.af.database.object(query);\r\n    }\r\n\r\n    newProduct() {\r\n        this.selectedProduct = null;\r\n        this.selectedProductId = null;\r\n        this.addNewProduct = true;\r\n\r\n        this.fbProductDetails = null;\r\n    }\r\n\r\n    loadTinyMCE(details: string) {\r\n        tinymce.init({\r\n            selector: \"[tinyMCE]\",\r\n            menubar: false,\r\n            toolbar1: \"bold italic underline strikethrough alignleft aligncenter alignright alignjustify styleselect bullist numlist outdent indent blockquote undo redo removeformat subscript superscript\",\r\n        });\r\n        if (tinymce.activeEditor.getContent() == \"\") {\r\n            clearTimeout(this.timerTiny);\r\n            this.timerTiny = setTimeout(() => this.tinyMCESetContent(details), 1000);\r\n        }\r\n        return details;\r\n    }\r\n\r\n    tinyMCESetContent(content) {\r\n        console.log(\"content = \" + content);\r\n        tinymce.activeEditor.setContent(content);\r\n        clearTimeout(this.timerTiny);\r\n    }\r\n\r\n    addProduct(name: string, desc: string, imgUrl: string, details: string, mrp: string, price: string) {\r\n        var data: Object;\r\n        details = tinymce.activeEditor.getContent();\r\n        data = {\r\n            'Name': name,\r\n            'Description': desc,\r\n            'ImageLink': imgUrl,\r\n            'Details': details,\r\n            'MRP': mrp,\r\n            'Price': price\r\n        }\r\n        var query: string = \"/Gadgetz/\" + this.selectedCategory + '/Brands/' + this.selectedBrandId + '/Products';\r\n        console.log(query);\r\n        this.howdyalert('info','Processing.', true);\r\n        this.fbNewProduct = this.af.database.list(query);\r\n        const promise = this.fbNewProduct.push(data);\r\n        promise\r\n            .then(_ => this.howdyalert('success','New product added successfully.', true))\r\n            .catch(err => this.howdyalert('warning','Error occurred while addding product.', true));\r\n    }\r\n\r\n    updateProduct(name: string, desc: string, imgUrl: string, details: string, mrp: string, price: string) {\r\n        var data: Object;\r\n        details = tinymce.activeEditor.getContent();\r\n        data = {\r\n            'Name': name,\r\n            'Description': desc,\r\n            'ImageLink': imgUrl,\r\n            'Details': details,\r\n            'MRP': mrp,\r\n            'Price': price\r\n        }\r\n        this.howdyalert('info','Processing.', true);\r\n        const promise = this.fbProductDetails.update(data);\r\n        promise\r\n            .then(_ => this.howdyalert('success', 'Product updated successfully.', true))\r\n            .catch(err => this.howdyalert('warning','Error occurred while update.', true));\r\n    }\r\n\r\n    deleteProduct() {\r\n        this.howdyalert('info','Processing.', true);\r\n        const promise = this.fbProductDetails.remove();\r\n        promise\r\n            .then(_ => this.howdyalert('success', 'Product deleted successfully.', true))\r\n            .catch(err => this.howdyalert('warning','Error occurred while delete.', true));\r\n    }\r\n\r\n    howdyalert(type, msg, status) {\r\n        this.howdyAlertType = type;\r\n        this.howdyAlertMsg = msg;\r\n        this.howdyAlert = status;\r\n        this.selectedProduct = null;\r\n        this.selectedProductId = null;\r\n        this.addNewProduct = false;\r\n    }\r\n\r\n    closeAlert() {\r\n        this.howdyAlert = false;\r\n    }\r\n}\r\n\r\n"]}