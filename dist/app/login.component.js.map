{"version":3,"file":"login.component.js","sourceRoot":"","sources":["login.component.ts"],"names":[],"mappings":";;;;;;;;;;AAAA,qBAAkC,eAAe,CAAC,CAAA;AAClD,uBAAkF,iBAAiB,CAAC,CAAA;AACpG,6BAQoB,cAAc,CAAC,CAAA;AAEnC,QAAO,sBAAsB,CAAC,CAAA;AAS9B;IAQE,wBACS,EAAe,EACf,MAAc;QAVzB,iBA0DC;QAjDU,OAAE,GAAF,EAAE,CAAa;QACf,WAAM,GAAN,MAAM,CAAQ;QACrB,EAAE,CAAC,IAAI;aACA,EAAE,CAAC,UAAA,CAAC,IAAI,OAAA,KAAI,CAAC,eAAe,CAAC,CAAC,CAAC,EAAvB,CAAuB,CAAC;aAChC,SAAS,CAAC,UAAA,IAAI,IAAI,OAAA,KAAI,CAAC,eAAe,CAAC,IAAI,CAAC,EAA1B,CAA0B,CAAC,CAAA;IACtD,CAAC;IAED,gBAAgB;IAChB,kCAAS,GAAT,UAAU,KAAa,EAAE,QAAgB;QAAzC,iBAOC;QANC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,OAAA,KAAK,EAAE,UAAA,QAAQ,EAAE,EAAE;YACtC,MAAM,EAAE,0BAAW,CAAC,QAAQ;YAC5B,QAAQ,EAAE,4BAAa,CAAC,QAAQ;SACjC,CAAC;aACC,IAAI,CAAC,UAAC,IAAI,IAAK,OAAA,KAAI,CAAC,YAAY,CAAC,IAAI,CAAC,EAAvB,CAAuB,CAAC;aACvC,KAAK,CAAC,UAAA,CAAC,IAAI,OAAA,KAAI,CAAC,WAAW,CAAC,CAAC,CAAC,EAAnB,CAAmB,CAAC,CAAC;IACrC,CAAC;IACD,mCAAU,GAAV;QACE,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC;QACtB,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;IACnC,CAAC;IACD,qCAAY,GAAZ,UAAa,IAAI;QACf,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,oBAAoB,EAAE,IAAI,CAAC,CAAC;QACpD,IAAI,CAAC,gBAAgB,EAAE,CAAC;IAC1B,CAAC;IACD,oCAAW,GAAX,UAAY,CAAC;QACX,IAAI,CAAC,UAAU,CAAC,QAAQ,EAAE,QAAQ,GAAG,CAAC,EAAE,IAAI,CAAC,CAAC;IAChD,CAAC;IAED,wCAAe,GAAf,UAAgB,IAAI;QAClB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;IACnB,CAAC;IACD,yCAAgB,GAAhB;QACE,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACvB,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC;YACpB,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;QACnC,IAAI;YACF,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;IACrC,CAAC;IAED,WAAW;IACX,mCAAU,GAAV,UAAW,IAAI,EAAE,GAAG,EAAE,MAAM;QAC1B,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;QAC3B,IAAI,CAAC,aAAa,GAAG,GAAG,CAAC;QACzB,IAAI,CAAC,UAAU,GAAG,MAAM,CAAC;IAC3B,CAAC;IACD,mCAAU,GAAV;QACE,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;IAC1B,CAAC;IA/DH;QAAC,gBAAS,CAAC;YACT,QAAQ,EAAE,MAAM,CAAC,EAAE;YACnB,QAAQ,EAAE,OAAO;YACjB,WAAW,EAAE,sBAAsB;YACnC,SAAS,EAAE,CAAC,qBAAqB,CAAC;SACnC,CAAC;;sBAAA;IA4DF,qBAAC;AAAD,CAAC,AA1DD,IA0DC;AA1DY,sBAAc,iBA0D1B,CAAA","sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { Routes, Router, RouteSegment, ROUTER_DIRECTIVES, ROUTER_PROVIDERS } from '@angular/router';\r\nimport {\r\n  AuthMethods,\r\n  AuthProviders,\r\n  defaultFirebase,\r\n  AngularFire,\r\n  FIREBASE_PROVIDERS,\r\n  FirebaseListObservable,\r\n  FirebaseAuthState,\r\n  FirebaseApp} from 'angularfire2';\r\nimport { Observable } from 'rxjs/Observable';\r\nimport 'rxjs/add/operator/do';\r\n\r\n@Component({\r\n  moduleId: module.id,\r\n  selector: 'login',\r\n  templateUrl: 'login.component.html',\r\n  styleUrls: ['login.component.css'],\r\n})\r\n\r\nexport class LoginComponent {\r\n\r\n  loginAlert: boolean;\r\n  loginAlertMsg: string;\r\n  loginAlertType: string;\r\n\r\n  user: FirebaseAuthState;\r\n\r\n  constructor(\r\n    public af: AngularFire,\r\n    public router: Router) {\r\n    af.auth\r\n          .do(v => this.userCredentials(v))\r\n          .subscribe(user => this.userCredentials(user))\r\n  }\r\n\r\n  /* login user */\r\n  loginUser(email: string, password: string) {\r\n    this.af.auth.login({ email, password }, {\r\n      method: AuthMethods.Password,\r\n      provider: AuthProviders.Password\r\n    })\r\n      .then((user) => this.loginSuccess(user))\r\n      .catch(e => this.loginFailed(e));\r\n  }\r\n  logoutUser() {\r\n    this.af.auth.logout();\r\n    this.router.navigate(['/login']);\r\n  }\r\n  loginSuccess(user) {\r\n    this.loginalert('info', 'Login successfull.', true);\r\n    this.checkCredentials();\r\n  }\r\n  loginFailed(e) {\r\n    this.loginalert('danger', 'Login ' + e, true);\r\n  }\r\n\r\n  userCredentials(user) {\r\n    this.user = user;\r\n  }\r\n  checkCredentials() {\r\n    console.log(this.user);\r\n    if (this.user != null)\r\n      this.router.navigate(['/howdy']);\r\n    else\r\n      this.router.navigate(['/login']);\r\n  }\r\n\r\n  /* Alert */\r\n  loginalert(type, msg, status) {\r\n    this.loginAlertType = type;\r\n    this.loginAlertMsg = msg;\r\n    this.loginAlert = status;\r\n  }\r\n  closeAlert() {\r\n    this.loginAlert = false;\r\n  }\r\n\r\n}"]}